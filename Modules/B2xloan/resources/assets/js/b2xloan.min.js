"use strict";
let showCallBackData = function (res) {
    if ($(document).find("#checker_note").val(""), $(document).find("#confirmation_message").modal("hide"), $(document).find("#confirmation_message").find(".actionBtn").text("Submit"), "loan" == res.segment) {
        let table = $("#b2x-loan-table").DataTable(), currentPage = table.page();
        table.page(currentPage).draw("page"), table.clear().rows.add().draw()
    } else {
        let table = $("#b2x-loan-pending-withdraw-table").DataTable(), currentPage = table.page();
        table.page(currentPage).draw("page"), table.clear().rows.add().draw()
    }
};
$(document).on("click", ".resetBtn", (function (e) {
    $(document).find("#confirmation_message").find("#checker_note").val("")
})), $(document).on("click", ".changeWithdrawStatus", (function () {
    $(this).attr("data-action");
    let actionType = $(this).attr("title");
    $(document).find("#confirmation_message").modal("show"), $(document).find("#confirmation_message").find("action").modal("show"), $(document).find("#confirmation_message").find("action").modal("show"), $(document).find("#confirmation_message").find(".actionBtn").text(actionType), $(document).find("#confirmation_message").find("#b2x-loan-confirm-form").attr("action", $(this).attr("data-action"))
})), $(document).on("click", ".changeStatus", (function () {
    $(this).attr("data-action");
    let actionType = $(this).attr("title");
    $(document).find("#confirmation_message").modal("show"), $(document).find("#confirmation_message").find("action").modal("show"), $(document).find("#confirmation_message").find("action").modal("show"), $(document).find("#confirmation_message").find(".actionBtn").text(actionType), $(document).find("#confirmation_message").find("#b2x-loan-confirm-form").attr("action", $(this).attr("data-action"))
})), $("body").on("click", ".userInfo", (function () {
    let action = $(this).attr("data-action"), userId = $(this).attr("data-id"), loanId = $(this).attr("data-loan-id");
    $.ajax({
        url: action, beforeSend: function (xhr) {
            xhr.setRequestHeader("X-CSRF-Token", $('meta[name="csrf-token"]').attr("content"))
        }, type: "POST", data: {user_id: userId, loanId: loanId}, dataType: "json", success: function (res) {
            if ($("#name").text(res.data.first_name + " " + res.data.last_name), $("#email").text(res.data.email), $("#phone").text(res.data.phone), $("#user_id").text(res.data.user_id), null != res.data.payoutInfo) {
                let credentails = res.data.payoutInfo.credentials,
                    html = `<hr><table><tbody><tr>\n                        <td class="px-2"><strong>Payment Method:</strong></td>\n                        <td class="px-2">${res.data.payoutInfo.gateway.name}</td>\n                    </tr>`;
                credentails.forEach((function (item, index) {
                    console.log(item.name), console.log({index: index}), html += `<tr>\n                        <td class="px-2"><strong>${item.name}: </strong></td>\n                        <td class="px-2">${item.credential}</td>\n                    </tr>`
                })), html += "</tbody></table>", $(".payoutInfo").html(html)
            }
            $("#userInfo").modal("show")
        }, error: function (res) {
            var data = res.responseJSON;
            error_alert(data.message, data.title)
        }
    })
}));
